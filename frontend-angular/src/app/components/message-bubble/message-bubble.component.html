<div class="message-content">
  <div class="message-bubble" [class.bot-bubble]="message.isBot" [class.user-bubble]="!message.isBot">
    <ng-container *ngIf="isListResponse(); else markdownBlock">
      <div class="list-response">
        <p class="list-heading">Mostrando {{ displayCount }} de {{ listItems.length }} filmes</p>
        <div class="list-item" *ngFor="let item of visibleListItems">
          <span class="list-badge">â˜…</span>
          <div>
            <p class="list-title">{{ item.titulo }}</p>
            <p class="list-meta" *ngIf="getItemMeta(item)">{{ getItemMeta(item) }}</p>
            <p class="list-description" *ngIf="getItemDescription(item)">{{ getItemDescription(item) }}</p>
          </div>
        </div>
        <button *ngIf="hasMoreItems" class="more-btn" (click)="showMoreFilms()">
          Mostrar +10 filmes
        </button>
      </div>
    </ng-container>
    <ng-template #markdownBlock>
      <div class="message-text" [innerHTML]="renderedContent"></div>
    </ng-template>
    
    <button 
      *ngIf="message.isBot" 
      class="copy-btn" 
      (click)="copyToClipboard(getContentText())"
      title="Copiar resposta">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
        <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
      </svg>
    </button>
  </div>

</div>
